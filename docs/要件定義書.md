
# Cyrillic IME 要件定義書 (v1.0)

## 1\. プロジェクト概要

### 1.1. プロジェクト目的

キリル文字キーボード配列を用いて日本語（ひらがな）を入力する、モバイル（iOS/Android）向けIMEを開発する。
本アプリは、キリル文字学習者および言語学愛好家に対し、文字体系の多様性を体感できる高品質な入力体験を提供することを目的とする。

### 1.2. プロジェクトスコープ

  * **スコープ内**:
      * 複数（ロシア語、セルビア語、ウクライナ語等）のキリル文字配列プロファイルの提供。
      * プロファイルの動的切り替え機能。
      * キリル文字シーケンスから「ひらがな」への変換ロジック。
  * **スコープ外**:
      * **漢字・カタカナ変換**: 変換された「ひらがな」文字列をOSに渡すまでを責務とし、その後の漢字変換辞書や変換UIはOS標準の機能を利用する。
      * **スキーマの動的更新**: 変換スキーマ（JSON）はアプリ本体に同梱（ネイティブ・バンドル）し、ネットワーク経由での更新機能はv1.0のスコープ外とする。

## 2\. 機能要件 (Functional Requirements)

| ID | 要件名 | 概要 |
| :--- | :--- | :--- |
| REQ-F-001 | プロファイル選択 | ユーザーは、アプリ設定またはキーボードUIから、使用するキリル文字プロファイル（例: ロシア語標準、セルビア語）を選択できる。 |
| REQ-F-002 | プロファイル動的切替 | REQ-F-001で選択されたプロファイルに基づき、キーボードのレイアウト（例: `Њ`キーの表示）と変換ロジック（例: `Ћ` $\rightarrow$ `chi`）が即座に切り替わる。 |
| REQ-F-003 | キリル文字 $\rightarrow$ ひらがな変換 | ユーザーがキリル文字キー（またはシーケンス）を入力すると、選択中のプロファイルのスキーマに基づき、対応するひらがな（例: `КЯ` $\rightarrow$ `きゃ`）が入力バッファに生成される。 |
| REQ-F-004 | OS（漢字変換）連携 | REQ-F-003で生成されたひらがな文字列は、OSのIMEエンジンに渡され、OS標準の漢字・カタカナ変換候補が表示される。 |
| REQ-F-005 | 促音・撥音処理 | 子音の連続入力（例: `КК`）による促音（`っ`）の生成、および `Н` キーによる撥音（`ん`）の入力を、IMEエンジンがステートフルに処理する。 |

## 3\. 非機能要件 (Non-Functional Requirements)

| ID | 要件名 | 概要 |
| :--- | :--- | :--- |
| REQ-NF-001 | **パフォーマンス (低遅延)** | キーストロークから変換候補が表示されるまでの遅延は、OS標準のネイティブIME（例: 日本語ローマ字入力）と同等でなければならない。ユーザーが「もたつき」を体感することは許容されない。 |
| REQ-NF-002 | **完全オフライン動作** | アプリのインストールが完了した後、全ての機能（プロファイル切替、文字変換）は、機内モード（ネットワーク接続ゼロ）の環境下で何不自由なく動作しなければならない。 |
| REQ-NF-003 | **プラットフォーム** | iOS 16.0以降、および Android 10.0 (API 29) 以降をサポートする。 |
| REQ-NF-004 | **保守性・拡張性** | 変換ロジック（JSONスキーマ）と変換エンジン（Rust Core）が明確に分離（正規化）されており、将来的なプロファイルの追加やロジックの修正が、他のロジックに影響を与えず（デグレせず）容易に行えること。 |
